--JUANA
--Admin12345
--XEPDB1

SELECT USER FROM DUAL;


--Ver todos los usuarios conectados
SELECT username, osuser, machine FROM v$session WHERE username IS NOT NULL;


----Crear tablespace JUANA
CREATE TABLESPACE JUANA
DATAFILE '/opt/oracle/oradata/XE/XEPDB1/JUANA.dbf' SIZE 100M
AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


--Consultar que el tablespace JUANA existe
SELECT TABLESPACE_NAME
FROM DBA_TABLESPACES
WHERE TABLESPACE_NAME = 'JUANA';


--Validar la ubicación del tablespace JUANA
SELECT TABLESPACE_NAME, FILE_NAME FROM DBA_DATA_FILES WHERE TABLESPACE_NAME = 'JUANA';


--Crear usuario JUANA en el tablespace JUANA
CREATE USER JUANA IDENTIFIED BY Admin12345
DEFAULT TABLESPACE JUANA
TEMPORARY TABLESPACE temp;


--Desbloquear y Asignar Permisos al usuario JUANA
ALTER USER JUANA ACCOUNT UNLOCK;
GRANT CONNECT, RESOURCE TO JUANA;
ALTER USER JUANA QUOTA UNLIMITED ON USERS;
ALTER USER JUANA QUOTA UNLIMITED ON JUANA;


--Verificar que el usuario JUANA existe en el tablespace JUANA
SELECT USERNAME, DEFAULT_TABLESPACE, TEMPORARY_TABLESPACE
FROM DBA_USERS
WHERE USERNAME = 'JUANA';

--Eliminar usuario JUANA
DROP USER JUANA;


--Eliminar tablespace JUANA
DROP TABLESPACE JUANA INCLUDING CONTENTS AND DATAFILES;

--conexion usuario JUANA
--CREAR TABLA
CREATE TABLE FICHAS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TIPO VARCHAR2(200) NOT NULL,
    NOMBRE_AUTOR VARCHAR2(200),
    APELLIDO_AUTOR VARCHAR2(200),
    PAGINA NUMBER,
    NOMBRE VARCHAR2(200),
    TEMA VARCHAR2(200),
    ANIO NUMBER NOT NULL,
    LINK VARCHAR2(200)
);

INSERT INTO FICHAS (
    TIPO,
    NOMBRE_AUTOR,
    APELLIDO_AUTOR,
    PAGINA,
    NOMBRE,
    TEMA,
    ANIO,
    LINK
) VALUES (
    'Artículo académico',
    'Gabriel',
    'García Márquez',
    120,
    'Cien años de soledad: análisis literario',
    'Realismo mágico en la literatura latinoamericana',
    '1967',
    'https://ejemplo.com/cien-anos-analisis'
);

SELECT * FROM FICHAS;

DROP TABLE FICHAS;